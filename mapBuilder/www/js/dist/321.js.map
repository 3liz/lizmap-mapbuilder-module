{"version":3,"file":"321.js","mappings":"uOAcO,SAASA,IAEZ,IAAIC,EAAc,GACdC,EAAY,GACZC,GAAW,QAAc,aACzBC,GAAgB,QAASD,EAASE,aAAe,IAErD,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IACpBJ,EAAUI,GAAKA,EAAEC,WACjBN,EAAYK,GAAKF,EAAgBI,KAAKC,IAAI,EAAGH,GAGjD,IAAII,EAAW,IAAI,IAAa,CAC5BC,OAAQ,EAAE,SAAU,UACpBV,YAAaA,EACbC,UAAWA,IAGXU,EAAa,IAAI,IAAK,CACtBC,IAAK,wEACLC,MAAO,oCACPC,UAAW,KACXC,OAAQ,YACRC,WAAY,YACZP,SAAUA,EACVQ,MAAO,SACPC,aAAc,uNAKlB,OAAO,IAAI,IAAU,CACjBC,OAAQR,GAEhB,CASO,SAASS,IACZ,OAAOrB,GACX,CAQO,SAASsB,EAAcC,GAC1B,MAAO,CAAC,CACJ,KAAQ,OACR,IAAOA,EAAYC,UAAU,GAC7B,MAASD,EAAYE,WACrB,UAAa,KACb,WAAc,YACd,OAAUF,EAAYG,YACtB,MAAS,SACT,SAAY,CACR,UAAaH,EAAYI,cAAcC,eACvC,YAAeL,EAAYI,cAAcE,iBACzC,SAAYN,EAAYI,cAAcG,gBAGlD,C","sources":["webpack://ol-webpack/./modules/BaseLayers/ignStreets.js"],"sourcesContent":["/*******************************************************************\n * Class used to fill information about the Base Layer IGN Streets *\n *******************************************************************/\n\nimport {Tile as TileLayer} from 'ol/layer.js';\nimport {WMTS} from 'ol/source.js';\nimport WMTSTileGrid from 'ol/tilegrid/WMTS.js';\nimport {get as getProjection} from 'ol/proj.js';\nimport {getWidth} from 'ol/extent.js';\n\n/**\n * Get the raster to create a source for a map.\n * @returns {TileLayer} The raster.\n */\nexport function getRaster() {\n\n    let resolutions = [];\n    let matrixIds = [];\n    let proj3857 = getProjection('EPSG:3857');\n    let maxResolution = getWidth(proj3857.getExtent()) / 256;\n\n    for (let i = 0; i < 20; i++) {\n        matrixIds[i] = i.toString();\n        resolutions[i] = maxResolution / Math.pow(2, i);\n    }\n\n    let tileGrid = new WMTSTileGrid({\n        origin: [-20037508, 20037508],\n        resolutions: resolutions,\n        matrixIds: matrixIds\n    });\n\n    let ign_source = new WMTS({\n        url: \"https://data.geopf.fr/wmts?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile\",\n        layer: \"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2\",\n        matrixSet: 'PM',\n        format: \"image/png\",\n        projection: 'EPSG:3857',\n        tileGrid: tileGrid,\n        style: 'normal',\n        attributions: `<a href=\"https://www.ign.fr/\" target=\"_blank\">\n          <img src=\"https://wxs.ign.fr/static/logos/IGN/IGN.gif\" \n          title=\"Institut national de l'information géographique et forestière\" alt=\"IGN\"></a>`\n    });\n\n    return new TileLayer({\n        source: ign_source\n    });\n}\n\n\n/**\n * Get the raster to create a source for a map.\n * Used in the admin preview.\n * Different function due to some differences in the preview page.\n * @returns {TileLayer} The raster.\n */\nexport function getPreviewRaster() {\n    return getRaster();\n}\n\n\n/**\n * Get the InkMap JSON spec about this layer.\n * @param {WMTS} activeLayer Layer to print.\n * @returns {[{}]} Layer specs.\n */\nexport function getInkmapSpec(activeLayer) {\n    return [{\n        \"type\": \"WMTS\",\n        \"url\": activeLayer.getUrls()[0],\n        \"layer\": activeLayer.getLayer(),\n        \"matrixSet\": \"PM\",\n        \"projection\": \"EPSG:3857\",\n        \"format\": activeLayer.getFormat(),\n        \"style\": \"normal\",\n        \"tileGrid\": {\n            \"matrixIds\": activeLayer.getTileGrid().getMatrixIds(),\n            \"resolutions\": activeLayer.getTileGrid().getResolutions(),\n            \"tileSize\": activeLayer.getTileGrid().getTileSize()\n        }\n    }];\n}\n"],"names":["getRaster","resolutions","matrixIds","proj3857","maxResolution","getExtent","i","toString","Math","pow","tileGrid","origin","ign_source","url","layer","matrixSet","format","projection","style","attributions","source","getPreviewRaster","getInkmapSpec","activeLayer","getUrls","getLayer","getFormat","getTileGrid","getMatrixIds","getResolutions","getTileSize"],"sourceRoot":""}